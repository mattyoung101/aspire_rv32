## Emulation
This directory contains the C++ emulation for the processor. There are two emulators: the Baseline Emulator,
which is an ISA-level model built on top of [libriscv](https://github.com/fwsGonzo/libriscv); and the
Verilator emulator, which is a cycle-accurate model of the SystemVerilog RTL generated by Verilator.

This is used for verification by differential fuzzing. Instructions are run through the Verilator model, whose
register file is compared against the reference model.

### Building and running
First, acquire the build necessary build tools: CMake 3.20+, Clang, Ninja, LLD. These can be installed with
the system package manager, e.g. `yay -S cmake clang ninja lld`.

The following libraries are required (mostly by Sail itself):
- spdlog
- libgmp
- zlib

Now, build:

```
cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=Debug  # or Release
cd build
ninja
```

Run by specifying the path to the .bin file you want to simulate (note this is not an ELF file, it's the
result of that after objcopy):

```
./baseline_emulator <PATH_TO_BIN>
```
